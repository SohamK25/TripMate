const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

   export const chatSession = model.startChat({
      generationConfig,
   // safetySettings: Adjust safety settings
   // See https://ai.google.dev/gemini-api/docs/safety-settings
      history: [
        {
          role: "user",
          parts: [
            {text: " Generate travel plan for location New Orleans, LA, USA, for 6 days and 5 night, for a Friends Travel with a Moderate budget. Include flight details with prices(in Rupees) based on the search, flight booking URLs, and specify the airline and departure/arrival times for flights. Provide hotel options with hotel name, hotel address, price(in Rupees), hotel image URL, geo coordinates, ratings, and description. Include places to visit nearby with place name, place details, place image URL, geo coordinates, ticket pricing(in Rupees), and the time required to travel to each location. Ensure the plan covers 6 day and 5 night with a detailed each day plan, and include the best time to visit, all in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip_details\": {\n    \"destination\": \"New Orleans, LA, USA\",\n    \"duration\": \"6 days, 5 nights\",\n    \"budget\": \"Moderate\",\n    \"best_time_to_visit\": \"Spring (March-May) or Fall (September-November)\"\n  },\n  \"flight_details\": {\n    \"flight_price\": \"Varies depending on the time of year and airline. Check booking URLs for current prices. Example flight: INR 1,20,000 (round trip)\",\n    \"booking_urls\": [\n      \"https://www.google.com/flights\", \n      \"https://www.skyscanner.com/\", \n      \"https://www.expedia.com/\", \n      \"https://www.kayak.com/\"\n    ],\n    \"example_flight\": {\n      \"airline\": \"United Airlines\",\n      \"departure_time\": \"10:00 AM\",\n      \"arrival_time\": \"1:00 PM\",\n      \"departure_city\": \"Delhi\",\n      \"arrival_city\": \"New Orleans\"\n    }\n  },\n  \"hotel_options\": [\n    {\n      \"hotel_name\": \"The Historic New Orleans Collection\",\n      \"address\": \"533 Royal Street, New Orleans, LA 70130\",\n      \"price\": \"INR 7,000 - 10,000 per night\",\n      \"image_url\": \"https://www.hnoc.org/sites/default/files/styles/large_image/public/2021-11/HNOC_RoyalStreet_Facade_by_Sam_Darden.jpg\",\n      \"geo_coordinates\": \"29.9548, -90.0747\",\n      \"ratings\": \"4.5 stars\",\n      \"description\": \"Historic hotel in the French Quarter, offering charming rooms, a courtyard, and a restaurant.\"\n    },\n    {\n      \"hotel_name\": \"The Eliza Jane\",\n      \"address\": \"616 N. Peters Street, New Orleans, LA 70116\",\n      \"price\": \"INR 8,000 - 12,000 per night\",\n      \"image_url\": \"https://www.elizajanehotel.com/images/gallery/hotel-exterior.jpg\",\n      \"geo_coordinates\": \"29.9568, -90.0729\",\n      \"ratings\": \"4 stars\",\n      \"description\": \"Modern boutique hotel in the Warehouse District, offering stylish rooms, a rooftop pool, and a restaurant.\"\n    },\n    {\n      \"hotel_name\": \"The Pontchartrain Hotel\",\n      \"address\": \"2031 St. Charles Avenue, New Orleans, LA 70130\",\n      \"price\": \"INR 9,000 - 13,000 per night\",\n      \"image_url\": \"https://www.thepontchartrainhotel.com/media/images/gallery/exterior.jpg\",\n      \"geo_coordinates\": \"29.9484, -90.0876\",\n      \"ratings\": \"4 stars\",\n      \"description\": \"Historic hotel in the Garden District, offering spacious rooms, a courtyard, and a restaurant.\"\n    }\n  ],\n  \"nearby_places_to_visit\": [\n    {\n      \"place_name\": \"French Quarter\",\n      \"details\": \"Historic neighborhood known for its vibrant nightlife, live music, and unique architecture.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/French_Quarter_New_Orleans_2008.jpg/1280px-French_Quarter_New_Orleans_2008.jpg\",\n      \"geo_coordinates\": \"29.9539, -90.0718\",\n      \"ticket_pricing\": \"Free entry\",\n      \"time_required\": \"Full day\"\n    },\n    {\n      \"place_name\": \"Garden District\",\n      \"details\": \"Elegant neighborhood known for its beautiful mansions, oak-lined streets, and historic architecture.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Garden_District_New_Orleans_1.jpg/1280px-Garden_District_New_Orleans_1.jpg\",\n      \"geo_coordinates\": \"29.9448, -90.0977\",\n      \"ticket_pricing\": \"Free entry\",\n      \"time_required\": \"Half-day\"\n    },\n    {\n      \"place_name\": \"City Park\",\n      \"details\": \"Large urban park with a botanical garden, a museum, and a playground.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/City_Park_New_Orleans_20110621.jpg/1280px-City_Park_New_Orleans_20110621.jpg\",\n      \"geo_coordinates\": \"29.9653, -90.1094\",\n      \"ticket_pricing\": \"Free entry\",\n      \"time_required\": \"Half-day\"\n    },\n    {\n      \"place_name\": \"National World War II Museum\",\n      \"details\": \"Museum dedicated to the history of World War II, offering interactive exhibits and films.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/National_World_War_II_Museum_New_Orleans_2015-05-24.jpg/1280px-National_World_War_II_Museum_New_Orleans_2015-05-24.jpg\",\n      \"geo_coordinates\": \"29.9374, -90.0829\",\n      \"ticket_pricing\": \"INR 1,500 per person\",\n      \"time_required\": \"Full day\"\n    },\n    {\n      \"place_name\": \"French Market\",\n      \"details\": \"Historic market with a variety of vendors selling food, souvenirs, and crafts.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/French_Market_New_Orleans_2016-05-14.jpg/1280px-French_Market_New_Orleans_2016-05-14.jpg\",\n      \"geo_coordinates\": \"29.9557, -90.0706\",\n      \"ticket_pricing\": \"Free entry\",\n      \"time_required\": \"Half-day\"\n    },\n    {\n      \"place_name\": \"St. Louis Cemetery No. 1\",\n      \"details\": \"Historic cemetery with a variety of above-ground tombs and mausoleums.\",\n      \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/St._Louis_Cemetery_No._1_-_New_Orleans_-_2015-10-02.jpg/1280px-St._Louis_Cemetery_No._1_-_New_Orleans_-_2015-10-02.jpg\",\n      \"geo_coordinates\": \"29.9517, -90.0707\",\n      \"ticket_pricing\": \"INR 500 per person\",\n      \"time_required\": \"2-3 hours\"\n    }\n  ],\n  \"daily_schedule\": {\n    \"day_1\": {\n      \"morning\": \"Arrive at Louis Armstrong New Orleans International Airport (MSY) and check into your hotel in the French Quarter. Freshen up and grab some local coffee.\",\n      \"afternoon\": \"Explore the French Quarter, taking a guided walking tour to learn about the history and culture of the neighborhood. Visit Jackson Square and admire the architecture.\",\n      \"evening\": \"Experience the lively nightlife in the French Quarter, enjoying a delicious dinner at a local restaurant and listening to live music.\"\n    },\n    \"day_2\": {\n      \"morning\": \"Enjoy a leisurely brunch at Cafe du Monde, sampling their famous beignets and coffee. Take a stroll along the Mississippi River.\",\n      \"afternoon\": \"Visit the Garden District, exploring its elegant mansions and oak-lined streets. Take a carriage tour or bike ride through the area.\",\n      \"evening\": \"Enjoy a live jazz performance at a local club like Preservation Hall.\"\n    },\n    \"day_3\": {\n      \"morning\": \"Visit City Park, spending time in the botanical garden, the museum, or the playground. Enjoy a picnic lunch.\"\n      \"afternoon\": \"Explore the unique and colorful neighborhoods of Treme and Bywater, enjoying the local culture and art scene.\",\n      \"evening\": \"Sample the local cuisine at a dinner cruise along the Mississippi River.\"\n    },\n    \"day_4\": {\n      \"morning\": \"Head to the National World War II Museum, learning about the history and impact of the war. Watch a documentary or participate in an interactive exhibit.\"\n      \"afternoon\": \"Explore the historic French Market, browsing the various vendors selling food, souvenirs, and crafts. Pick up some unique gifts or snacks.\",\n      \"evening\": \"Experience a ghost tour of the French Quarter, learning about the haunted history of the city.\"\n    },\n    \"day_5\": {\n      \"morning\": \"Visit St. Louis Cemetery No. 1, exploring the above-ground tombs and mausoleums and learning about the history of the cemetery.\"\n      \"afternoon\": \"Relax and enjoy a spa day or indulge in a culinary cooking class to learn how to prepare local dishes.\"\n      \"evening\": \"Enjoy a final night of live music and entertainment in the French Quarter.\"\n    },\n    \"day_6\": {\n      \"morning\": \"Enjoy a final breakfast in the French Quarter.\"\n      \"afternoon\": \"Head to the airport for your flight back home.\"\n    }\n  }\n}\n```\n\n**Please note:**\n\n* This itinerary is a suggestion, and you can customize it to fit your preferences.\n* Flight prices and hotel rates can vary depending on the time of year and availability.\n* The example flight price is for reference only and can change based on search parameters. \n* You can find more affordable flight options by searching for flights on budget airlines or during off-season periods.\n* You can also find budget-friendly accommodation options such as hostels, guesthouses, and Airbnb rentals.\n* You can check the current ticket prices and availability for attractions on their respective websites.\n* You can also take advantage of free walking tours, which are a great way to see the city and learn about its history and culture.\n* Make sure to research and plan your transportation within the city as well, considering options like public transportation, taxis, or ride-sharing services. \n* Remember to factor in the cost of food, drinks, and other miscellaneous expenses when planning your budget.\n\nThis plan provides a detailed outline of a moderate trip to New Orleans, including flight booking details, hotel options, nearby places to visit, and a schedule outlining each day's activities. You can adjust the plan based on your friend group's interests and preferences.\n"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());